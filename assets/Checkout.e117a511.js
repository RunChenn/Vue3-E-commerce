import{u as x,v as l,V as w,D as y,r as v,o as d,b as n,d as _,e as b,w as t,G as C,H as j,O as r,J as k,K as O}from"./vendor.1eeb228f.js";import{a as g}from"./index.06ff196c.js";import{C as I,F as L}from"./Form.64db5a3e.js";import{R as F}from"./RelatedProds.3dad6fab.js";import{_ as N}from"./index.fa9b4643.js";const S={components:{Carts:I,Form:L,RelatedProds:F},name:"Checkout",setup(){const a=x(),s=l(!1),c=l({}),e=w({loadingItem:""}),u=l(!1),m=l("");y(async()=>{s.value=!0,i()});const i=async()=>{try{const o=await g.cart.getCart();c.value=o.data,c.value.carts[0].coupon&&(u.value=!0,m.value=c.value.carts[0].coupon.code),s.value=!1}catch(o){alert(o.message),s.value=!1}};return{isLoading:s,cart:c,loadingStatus:e,getCart:i,createOrder:async o=>{s.value=!0;try{const f=await g.order.addOrder({data:o});a.push({name:"checkout-success",params:{id:f.orderId}}),s.value=!1}catch(f){e.loadingItem="",s.value=!1,alert(f.message)}},isHaveCoupon:u,codeMsg:m}}},p=a=>(k("data-v-47c45a2c"),a=a(),O(),a),B={class:"container pt-4"},H={class:"mt-3"},M={class:"row flex-row-reverse justify-content-center pb-5"},R={key:0,class:"col-md-6"},V={class:"border p-4 mb-4"},D=p(()=>t("img",{src:"https://images.unsplash.com/photo-1502743780242-f10d2ce370f3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1916&q=80",alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,-1)),T={class:"w-100"},q={class:"d-flex justify-content-between"},E={class:"mb-0 fw-bold"},J={class:"mb-0"},P={class:"mb-0 fw-bold"},U={class:"table mt-4 border-top border-bottom text-muted"},G=p(()=>t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"\u5C0F\u8A08",-1)),K={class:"text-end border-0 px-0 pt-4"},Q={key:0},W=p(()=>t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"\u512A\u60E0\u5238",-1)),z={class:"text-end border-0 px-0 pt-0 pb-4"},A={class:"d-flex justify-content-between mt-4"},X=p(()=>t("p",{class:"mb-0 h4 fw-bold"},"\u7E3D\u91D1\u984D",-1)),Y={class:"mb-0 h4 fw-bold"},Z={class:"col-md-6"};function $(a,s,c,e,u,m){const i=v("Loading"),h=v("Form");return d(),n("div",B,[_(" Loading "),b(i,{active:e.isLoading,"onUpdate:active":s[0]||(s[0]=o=>e.isLoading=o),"is-full-page":!0},null,8,["active"]),t("div",H,[t("div",M,[e.cart.carts?(d(),n("div",R,[t("div",V,[(d(!0),n(C,null,j(e.cart.carts,o=>(d(),n("div",{class:"d-flex",key:o.id},[D,t("div",T,[t("div",q,[t("p",E,r(o.product.title),1),t("p",J,"NT$"+r(o.product.price),1)]),t("p",P,"x"+r(o.qty),1)])]))),128)),t("table",U,[t("tbody",null,[t("tr",null,[G,t("td",K,"NT$"+r(e.cart.total),1)]),e.isHaveCoupon?(d(),n("tr",Q,[W,t("td",z,r(e.codeMsg),1)])):_("v-if",!0)])]),t("div",A,[X,t("p",Y,"NT$"+r(e.cart.final_total),1)])])])):_("v-if",!0),t("div",Z,[_(" \u8868\u55AE "),b(h,{onCreateOrder:e.createOrder,cart:e.cart,"onUpdate:cart":s[1]||(s[1]=o=>e.cart=o)},null,8,["onCreateOrder","cart"])])])])])}var rt=N(S,[["render",$],["__scopeId","data-v-47c45a2c"]]);export{rt as default};
